<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Title</title>
        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
        />

        <!-- Bootstrap CSS -->
        <link
            rel="stylesheet"
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
            integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
            crossorigin="anonymous"
        />

        <!-- External Files and Plugins -->
        <link
            rel="stylesheet"
            href="https://cdn.materialdesignicons.com/5.4.55/css/materialdesignicons.min.css"
        />
        <link rel="stylesheet" href="css/index.css" />
        <script src="/js/jquery-3.5.1.js"></script>
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"
            integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
            crossorigin="anonymous"
        ></script>
        <script src="/js/bootstrap.js"></script>
        <script src="/js/holder.js"></script>

        <style>
            .carousel-item {
                height: 25rem;
                background-repeat: no-repeat;
                background-position: center;
                background-size: cover;
                position: relative;
            }

            .overlay {
                width: 100%;
                height: 100%;
                background: black;
                opacity: 0.6;
                position: absolute;
            }
        </style>
    </head>

    <body>
        <div class="container">
            <div
                id="carouselExampleIndicators"
                class="carousel slide"
                data-ride="carousel"
            >
                <ol class="carousel-indicators">
                    <li
                        data-target="#carouselExampleIndicators"
                        data-slide-to="0"
                        class="active"
                    ></li>
                    <li
                        data-target="#carouselExampleIndicators"
                        data-slide-to="1"
                    ></li>
                    <li
                        data-target="#carouselExampleIndicators"
                        data-slide-to="2"
                    ></li>
                </ol>
                <div class="carousel-inner">
                    <div
                        style="background-image: url(#)"
                        class="carousel-item active"
                    >
                        <div class="overlay"></div>
                        <div class="carousel-caption d-none d-md-block">
                            <h5>...</h5>
                            <p>...</p>
                            <a href="#">Read More</a>
                        </div>
                    </div>
                    <div style="background-image: url(#)" class="carousel-item">
                        <div class="overlay"></div>
                        <div class="carousel-caption d-none d-md-block">
                            <h5>...</h5>
                            <p>...</p>
                            <a href="#">Read More</a>
                        </div>
                    </div>
                    <div style="background-image: url(#)" class="carousel-item">
                        <div class="overlay"></div>
                        <div class="carousel-caption d-none d-md-block">
                            <h5>...</h5>
                            <p>...</p>
                            <a href="#">Read More</a>
                        </div>
                    </div>
                </div>
                <a
                    class="carousel-control-prev"
                    href="#carouselExampleIndicators"
                    role="button"
                    data-slide="prev"
                >
                    <span
                        class="carousel-control-prev-icon"
                        aria-hidden="true"
                    ></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a
                    class="carousel-control-next"
                    href="#carouselExampleIndicators"
                    role="button"
                    data-slide="next"
                >
                    <span
                        class="carousel-control-next-icon"
                        aria-hidden="true"
                    ></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>

        <script>
            $(function () {
                $("#slide-wrapper").hide();

                let api = `https://gnews.io/api/v3/search?q=covid&token=6bedae14994202f554f561ea1f63e4a8`;

                $.getJSON(api, function (response) {
                    var shuffle = Array(10)
                        .fill()
                        .map((a, i) => (a = i))
                        .sort(() => Math.random() - 0.5);

                    let w = document.querySelectorAll(".carousel-item");
                    let x = document.querySelectorAll(
                        ".carousel-item > div > h5"
                    );
                    let y = document.querySelectorAll(
                        ".carousel-item > div > p"
                    );
                    let z = document.querySelectorAll(
                        ".carousel-item > div > a"
                    );

                    let i = 0;
                    for (let j of shuffle) {
                        if (i < 3 && response.articles[j].image != null) {
                            w[
                                i
                            ].style.backgroundImage = `url(${response.articles[j].image})`;
                            x[i].innerHTML = response.articles[j].title;
                            y[i].innerHTML = response.articles[j].description;
                            z[i].setAttribute(
                                "href",
                                response.articles[j].source.url
                            );
                            i++;
                        }

                        if (i == 3) {
                            break;
                        }
                    }
                    $("#slide-wrapper").show();
                });
            });
        </script>
    </body>
</html>
